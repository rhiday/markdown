
# WebSocket API for RFID messages

WebSocket API utilizes the websocket protocol to forward RFID messages generated by the Kone Siteapi and by Siteflow.

he websocket address for the Siteflow websocket api messages has the following structure:

```
wss://materials.siteflow.kone.com?site_id=<site_id>&x-authorization=<authorization_token>
```

## RFID message

RFID messages are sent when RFID reading events occur. When connecting it also returns all RFID tags locations for the specified site.

The RFID message has the follwing fields:

- ```source: string```, equal to ```rfid```
- ```topic: string```, the original topic of the message from group to cloud. The structure of the topic is the following:

    ```from/siteapi/<site_id>/<group_id>/acs_v1/<client_name>/unknown_media```

    where site_id is a string identifying the site, group_id is an integer identifying the group within the site. 
    For a site the group ids are usually 1, 2, ...
- ```site_id: string```, the site id.
- ```time: string```, the UTC time of the message as generated by the reader. 
- ```group_id: int```, the group id.
- ```group_floor_id: int```, the group flor id, if this is a lift or landing reader.
- ```area: int```, deck area id if this is a lift rfid reader.
- ```media_type: string```, equal to ```RFID```
- ```media_id: string```, the tag code.
- ```media_cc: string```, unused, empty.
- ```antenna: string```, the antena that read the tag.
- ```rssi: string```, signal strength 

Next there is an example of a RFID message.

```
{
    "source": "rfid",
    "terminal": 1,
    "topic": "from/siteapi/d48a61c339b846bb8981734dbd166f8b/2/acs_v1/null/unknown_media",
    "site_id": "d48a61c339b846bb8981734dbd166f8b",
    "time": "2024-03-23T07:27:00.924+00:00",
    "group_id": 2,
    "group_floor_id": 13,
    "area": 1002010,
    "media_type": "RFID",
    "media_id": "A00000000000000000003410",
    "media_cc": "",
    "antenna": "Antenna02",
    "received": 1711178821942,
    "rssi": "53"
}
```